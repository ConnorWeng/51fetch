{exec, spawn} = require 'child_process'

config =
    lib: 'lib'
    source: 'src'
    test: 'test'

task 'watch', '', ->
    watchCode config.source
    watchCode config.test

task 'build', '', ->
    compileCode config.source
    compileCode config.test

watchCode = (dir) ->
    watchSrc = exec "coffee -o #{config.lib}/ -cw #{dir}/"
    watchSrc.stdout.on 'data', (data) ->
        process.stdout.write data

compileCode = (dir) ->
    compile = exec "coffee -o #{config.lib}/ -c #{dir}/"
    compile.stdout.on 'data', (data) ->
        process.stdout.write data
